<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.7.29">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>lecture-01-functions – MSDA</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js" type="module"></script>
<script src="../../site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-0815c480559380816a4d1ea211a47e91.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-dark-748b535e376f14d4692bf2b2e5fd6380.css" rel="stylesheet" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-0815c480559380816a4d1ea211a47e91.css" rel="stylesheet" class="quarto-color-scheme-extra" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap-078f5be260b122ac6dcea7ea886f5ae9.min.css" rel="stylesheet" append-hash="true" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="../../site_libs/bootstrap/bootstrap-dark-c339993edb64e1d3a2f6a10e47fa98b5.min.css" rel="stylesheet" append-hash="true" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<link href="../../site_libs/bootstrap/bootstrap-078f5be260b122ac6dcea7ea886f5ae9.min.css" rel="stylesheet" append-hash="true" class="quarto-color-scheme-extra" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

</head>

<body class="nav-fixed fullcontent quarto-light"><script id="quarto-html-before-body" type="application/javascript">
    const toggleBodyColorMode = (bsSheetEl) => {
      const mode = bsSheetEl.getAttribute("data-mode");
      const bodyEl = window.document.querySelector("body");
      if (mode === "dark") {
        bodyEl.classList.add("quarto-dark");
        bodyEl.classList.remove("quarto-light");
      } else {
        bodyEl.classList.add("quarto-light");
        bodyEl.classList.remove("quarto-dark");
      }
    }
    const toggleBodyColorPrimary = () => {
      const bsSheetEl = window.document.querySelector("link#quarto-bootstrap:not([rel=disabled-stylesheet])");
      if (bsSheetEl) {
        toggleBodyColorMode(bsSheetEl);
      }
    }
    const setColorSchemeToggle = (alternate) => {
      const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
      for (let i=0; i < toggles.length; i++) {
        const toggle = toggles[i];
        if (toggle) {
          if (alternate) {
            toggle.classList.add("alternate");
          } else {
            toggle.classList.remove("alternate");
          }
        }
      }
    };
    const toggleColorMode = (alternate) => {
      // Switch the stylesheets
      const primaryStylesheets = window.document.querySelectorAll('link.quarto-color-scheme:not(.quarto-color-alternate)');
      const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
      manageTransitions('#quarto-margin-sidebar .nav-link', false);
      if (alternate) {
        // note: dark is layered on light, we don't disable primary!
        enableStylesheet(alternateStylesheets);
        for (const sheetNode of alternateStylesheets) {
          if (sheetNode.id === "quarto-bootstrap") {
            toggleBodyColorMode(sheetNode);
          }
        }
      } else {
        disableStylesheet(alternateStylesheets);
        enableStylesheet(primaryStylesheets)
        toggleBodyColorPrimary();
      }
      manageTransitions('#quarto-margin-sidebar .nav-link', true);
      // Switch the toggles
      setColorSchemeToggle(alternate)
      // Hack to workaround the fact that safari doesn't
      // properly recolor the scrollbar when toggling (#1455)
      if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
        manageTransitions("body", false);
        window.scrollTo(0, 1);
        setTimeout(() => {
          window.scrollTo(0, 0);
          manageTransitions("body", true);
        }, 40);
      }
    }
    const disableStylesheet = (stylesheets) => {
      for (let i=0; i < stylesheets.length; i++) {
        const stylesheet = stylesheets[i];
        stylesheet.rel = 'disabled-stylesheet';
      }
    }
    const enableStylesheet = (stylesheets) => {
      for (let i=0; i < stylesheets.length; i++) {
        const stylesheet = stylesheets[i];
        if(stylesheet.rel !== 'stylesheet') { // for Chrome, which will still FOUC without this check
          stylesheet.rel = 'stylesheet';
        }
      }
    }
    const manageTransitions = (selector, allowTransitions) => {
      const els = window.document.querySelectorAll(selector);
      for (let i=0; i < els.length; i++) {
        const el = els[i];
        if (allowTransitions) {
          el.classList.remove('notransition');
        } else {
          el.classList.add('notransition');
        }
      }
    }
    const isFileUrl = () => {
      return window.location.protocol === 'file:';
    }
    const hasAlternateSentinel = () => {
      let styleSentinel = getColorSchemeSentinel();
      if (styleSentinel !== null) {
        return styleSentinel === "alternate";
      } else {
        return false;
      }
    }
    const setStyleSentinel = (alternate) => {
      const value = alternate ? "alternate" : "default";
      if (!isFileUrl()) {
        window.localStorage.setItem("quarto-color-scheme", value);
      } else {
        localAlternateSentinel = value;
      }
    }
    const getColorSchemeSentinel = () => {
      if (!isFileUrl()) {
        const storageValue = window.localStorage.getItem("quarto-color-scheme");
        return storageValue != null ? storageValue : localAlternateSentinel;
      } else {
        return localAlternateSentinel;
      }
    }
    const toggleGiscusIfUsed = (isAlternate, darkModeDefault) => {
      const baseTheme = document.querySelector('#giscus-base-theme')?.value ?? 'light';
      const alternateTheme = document.querySelector('#giscus-alt-theme')?.value ?? 'dark';
      let newTheme = '';
      if(authorPrefersDark) {
        newTheme = isAlternate ? baseTheme : alternateTheme;
      } else {
        newTheme = isAlternate ? alternateTheme : baseTheme;
      }
      const changeGiscusTheme = () => {
        // From: https://github.com/giscus/giscus/issues/336
        const sendMessage = (message) => {
          const iframe = document.querySelector('iframe.giscus-frame');
          if (!iframe) return;
          iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');
        }
        sendMessage({
          setConfig: {
            theme: newTheme
          }
        });
      }
      const isGiscussLoaded = window.document.querySelector('iframe.giscus-frame') !== null;
      if (isGiscussLoaded) {
        changeGiscusTheme();
      }
    };
    const authorPrefersDark = false;
    const darkModeDefault = authorPrefersDark;
      document.querySelector('link#quarto-text-highlighting-styles.quarto-color-scheme-extra').rel = 'disabled-stylesheet';
      document.querySelector('link#quarto-bootstrap.quarto-color-scheme-extra').rel = 'disabled-stylesheet';
    let localAlternateSentinel = darkModeDefault ? 'alternate' : 'default';
    // Dark / light mode switch
    window.quartoToggleColorScheme = () => {
      // Read the current dark / light value
      let toAlternate = !hasAlternateSentinel();
      toggleColorMode(toAlternate);
      setStyleSentinel(toAlternate);
      toggleGiscusIfUsed(toAlternate, darkModeDefault);
    };
    // Switch to dark mode if need be
    if (hasAlternateSentinel()) {
      toggleColorMode(true);
    } else {
      toggleColorMode(false);
    }
  </script>

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">MSDA</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../index.html"> 
<span class="menu-text">Course Overview</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-maths-content" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Maths Content</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-maths-content">    
        <li>
    <a class="dropdown-item" href="../../Content/Maths/lecture-01-functions.html">
 <span class="dropdown-text">Week 01 – Functions</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../Content/Maths/lecture-02-exp-n-log.html">
 <span class="dropdown-text">Week 02 – exp(x) and log(x)</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../Content/Maths/lecture-03-sequences.html">
 <span class="dropdown-text">Week 03 – Sequences</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../Content/Maths/lecture-04-differentiation.html">
 <span class="dropdown-text">Week 04 – Differentiation</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../Content/Maths/lecture-05-integration.html">
 <span class="dropdown-text">Week 05 – Integration</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../Content/Maths/lecture-06-probability.html">
 <span class="dropdown-text">Week 06 – Probability</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-maths-tutorials" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Maths Tutorials</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-maths-tutorials">    
        <li>
    <a class="dropdown-item" href="../../Tutorials/Maths/workshop-01-functions.html">
 <span class="dropdown-text">Week 01 – Tutorial: Functions</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../Tutorials/Maths/workshop-02-exp-n-log.html">
 <span class="dropdown-text">Week 02 – Tutorial: exp(x) and log(x)</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../Tutorials/Maths/workshop-03-sequences.html">
 <span class="dropdown-text">Week 03 – Tutorial: Sequences</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../Tutorials/Maths/workshop-04-differentiation.html">
 <span class="dropdown-text">Week 04 – Tutorial: Differentiation</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../Tutorials/Maths/workshop-05-integration.html">
 <span class="dropdown-text">Week 05 – Tutorial: Integration</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../Tutorials/Maths/workshop-06-probability.html">
 <span class="dropdown-text">Week 06 – Tutorial: Probability</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-stats-content" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Stats Content</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-stats-content">    
        <li>
    <a class="dropdown-item" href="../../Content/Stats/getting_ready_with_R_RStudio_IFP.html">
 <span class="dropdown-text">Week 07 – Getting Ready with R and RStudio</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../Content/Stats/week-08-content-stats.html">
 <span class="dropdown-text">Week 08 – Research Questions, Variables, and Study Design</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../Content/Stats/week-09-content-stats.html">
 <span class="dropdown-text">Week 09 –Categorical variables</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../Content/Stats/Plots_and_grammar.html">
 <span class="dropdown-text">Plots – Grammar of Graphics</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../Content/Stats/week-10-content-stats.html">
 <span class="dropdown-text">Week 10 –</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../Content/Stats/week-11-content-stats.html">
 <span class="dropdown-text">Week 11 –</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../Content/Stats/week-12-content-stats.html">
 <span class="dropdown-text">Week 12 –</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../Content/Stats/week-13-content-stats.html">
 <span class="dropdown-text">Week 13 –</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-stats-tutorials" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Stats Tutorials</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-stats-tutorials">    
        <li>
    <a class="dropdown-item" href="../../Tutorials/Stats/week-7/week-07-tutorial-stats.html">
 <span class="dropdown-text">Week 07 – Tutorial 00</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../Tutorials/Stats/week-8/week-08-tutorial-stats.html">
 <span class="dropdown-text">Week 08 – Tutorial 01</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../Tutorials/Stats/week-9/week-09-tutorial-stats.html">
 <span class="dropdown-text">Week 09 – Tutorial 02</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../Tutorials/Stats/week-10/week-10-tutorial-stats.html">
 <span class="dropdown-text">Week 10 – Tutorial 03</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../Tutorials/Stats/week-11/week-11-tutorial-stats.html">
 <span class="dropdown-text">Week 11 – Tutorial 04</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../Tutorials/Stats/week-12/week-12-tutorial-stats.html">
 <span class="dropdown-text">Week 12 – Tutorial 05</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../Tutorials/Stats/week-13/week-13-tutorial-stats.html">
 <span class="dropdown-text">Week 13 – Tutorial 06</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../Tutorials/Stats/week-14/week-14-tutorial-stats.html">
 <span class="dropdown-text">Week 14 – Tutorial 07</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../Tutorials/Stats/week-15/week-15-tutorial-stats.html">
 <span class="dropdown-text">Week 15 – Tutorial 08</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../Tutorials/Stats/week-16/week-16-tutorial-stats.html">
 <span class="dropdown-text">Week 16 – Tutorial 09</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-r-support" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">R Support</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-r-support">    
        <li>
    <a class="dropdown-item" href="../../R Support/getting_ready_with_R_RStudio_IFP.qmd">
 <span class="dropdown-text">Getting Ready with R and RStudio – IFP</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../R Support/R Basics_Syntax_&amp;_Variables.qmd">
 <span class="dropdown-text">R Basics: Syntax and Variables</span></a>
  </li>  
    </ul>
  </li>
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content" id="quarto-document-content"><header id="title-block-header" class="quarto-title-block"></header>





<section id="functions" class="level1" data-number="1">
<h1 data-number="1"><span class="header-section-number">1</span> Functions</h1>
<p>Linear equations and quadratics are two useful ways to algebraically describe the relationship between variables. You might also be familiar with more complicated algebraic expressions for structures like hyperbolae and ellipses, which have forms like <span class="math display">\[
  \frac{x^2}{a^2} - \frac{y^2}{b^2} = 1, \quad   \frac{x^2}{a^2} + \frac{y^2}{b^2} = 1.
\]</span> While these specific examples do enable a broader range of modelling, but point to a more general idea for defining algebraic relationships.</p>
<section id="definition" class="level2" data-number="1.1">
<h2 data-number="1.1" class="anchored" data-anchor-id="definition"><span class="header-section-number">1.1</span> Definition</h2>
<p>In school, the idea of <strong>functions</strong> is often introduced early on through the concept of a ‘function machine’. This is some imagined box which takes in some number <span class="math inline">\(x\)</span> as an input, carries out some operation <span class="math inline">\(f\)</span> and then returns another number <span class="math inline">\(y\)</span> as output.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/06/Function_machine2.svg" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:30.0%" alt="Basic flowchart of a function machine."></p>
</figure>
</div>
<p>Mathematically, this would be denoted <span class="math inline">\(f:x \rightarrow y\)</span> or <span class="math inline">\(y = f(x)\)</span> which would be read as “<span class="math inline">\(y\)</span> equals <span class="math inline">\(f\)</span> of <span class="math inline">\(x\)</span>” or “the function <span class="math inline">\(f\)</span> applied to <span class="math inline">\(x\)</span>”. As an example of how this might look in practice, the function <span class="math inline">\(f(x) = 2x\)</span> maps values to their double. If <span class="math inline">\(x = 7\)</span> for instance, the output of the function will be <span class="math inline">\(f(2) = 14\)</span>.</p>
<p>Functions are an important concept in mathematics, and they describe many natural and human-made phenomena. The speed of growth of a plant for instance is a function of (amongst other factors), the temperature of the weather.</p>
<section id="domain-codomain-and-range" class="level3" data-number="1.1.1">
<h3 data-number="1.1.1" class="anchored" data-anchor-id="domain-codomain-and-range"><span class="header-section-number">1.1.1</span> Domain, Codomain, and Range</h3>
<p>Aside from the relationship between variables, essential to this idea of functions is the set of values that it’s possible to use as inputs or receive as outputs. This is reflected in the full mathematical definition of a function:</p>
<div class="callout callout-style-default callout-note callout-titled" title="Definition">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Definition
</div>
</div>
<div class="callout-body-container callout-body">
<p>A function is a relationship that maps elements from one set <span class="math inline">\(A\)</span> to another set <span class="math inline">\(B\)</span>, where each element in <span class="math inline">\(A\)</span> is uniquely associated with an element in <span class="math inline">\(B\)</span>. This may be denoted <span class="math inline">\(f:A\rightarrow{}B\)</span>.</p>
</div>
</div>
<p>Here, the first set of values <span class="math inline">\(A\)</span> is called the <strong>domain</strong>, and can be thought of as the set of valid inputs for <span class="math inline">\(f\)</span>. The second set of values <span class="math inline">\(B\)</span> is called the <strong>codomain</strong>, and can be thought of as the type of numbers we expect to get out of <span class="math inline">\(f\)</span>. Linked to that is the <strong>range</strong>; this is the subset of all codomain values that are actually received as outputs.</p>
<p>For example, consider the function <span class="math inline">\(f(x) = x^2\)</span> where <span class="math inline">\(f:\mathbb{R}\rightarrow\mathbb{R}\)</span>. This function takes any real number as an input, and returns another real number as the output; its domain is the reals, and the codomain is the reals. However square numbers are always positive, so the range of <span class="math inline">\(f\)</span> is restricted to the positive real numbers.</p>
<p>Sometimes it is easier to think of where a function is not defined, rather than when it is. For instance, the square root of a negative number is not defined in the real numbers (e.g.&nbsp;<span class="math inline">\(\sqrt{-1}\)</span> is not a real number). Similarly, dividing by zero is not meaningful, so <span class="math inline">\(\frac{1}{x}\)</span> is not defined for <span class="math inline">\(x=0\)</span>.</p>
<p>In theory (but not always in practice) a function should always have it’s domain specified. For example, strictly speaking we should say:</p>
<div class="quarto-layout-panel" data-layout-ncol="2">
<div class="quarto-layout-row">
<div class="quarto-layout-cell" style="flex-basis: 50.0%;justify-content: flex-start;">
<p><span class="math display">\[\sqrt{x}\ \text{for}\ \lbrace x \in \mathbb{R}~|~x \geq 0\rbrace,\]</span></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 50.0%;justify-content: flex-start;">
<p><span class="math display">\[\frac{1}{x}\ \text{for}\ \lbrace x \in \mathbb{R}~|~x \ne 0\rbrace.\]</span></p>
</div>
</div>
</div>
<p>While the domain may be restricted because the graph is only defined for certain values, we may also restrict it because in the context of the real-world problem some answers do not make sense. For example, if we wishes to use out function <span class="math inline">\(f(x) = x^2\)</span> to find integer squares we could define its domain as <span class="math inline">\(\mathbb{Z}\)</span>, rather than <span class="math inline">\(\mathbb{R}\)</span>.</p>
<div class="callout callout-style-default callout-tip callout-titled" title="Example A">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Example A
</div>
</div>
<div class="callout-body-container callout-body">
<p>We are constructing a rabbit enclosure from <span class="math inline">\(60 m\)</span> of fence. With only this fence, we want to make the largest possible rectangular enclosure for our bunny. One side of the enclosure is against the wall so we don’t need any fence on that side.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/06/rabbit.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:50.0%" alt="Rabbit enclosure with the length parallel to the wall labelled 'L' and the length perpendicular to the wall labelled 'W'."></p>
</figure>
</div>
<p>Algebraically, we can write that we are aiming to maximize the enclosure’s area <span class="math inline">\(L\times{}W\)</span> and that our solution must satisfy <span class="math inline">\(L + 2W = 60\)</span>. However, since <span class="math inline">\(L\)</span> and <span class="math inline">\(W\)</span> represent lengths of fence in the real world they must also be positive numbers.</p>
<p>This is an example of a domain restriction. Any results in our calculations that includes a negative length or area cannot be valid.</p>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled" title="Example B">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Example B
</div>
</div>
<div class="callout-body-container callout-body">
<p>In the GeoGebra Applet below, restrict the domain so that the function models the path of the basketball only (<em>i.e.</em> it should not pass beyond the path of the ball).</p>
<div class="cell" data-layout-align="center">
<iframe src="https://www.geogebra.org/material/iframe/id/nswh6yjg/width/950/height/567/border/888888/sri/true/sdz/true" width="672" height="400px" data-external="1">
</iframe>
</div>
</div>
</div>
</section>
</section>
<section id="inverse-functions" class="level2" data-number="1.2">
<h2 data-number="1.2" class="anchored" data-anchor-id="inverse-functions"><span class="header-section-number">1.2</span> Inverse functions</h2>
<p>Since functions take one value and map it to another, we can also consider how to take the result back to the original value. Consider the function <span class="math inline">\(f(x)=x^2\)</span> over the domain <span class="math inline">\(\lbrace 10, 2, 3, -3\rbrace\)</span>.</p>
<table class="caption-top table">
<thead>
<tr class="header">
<th style="text-align: center;"><span class="math inline">\(x\)</span></th>
<th style="text-align: center;"><span class="math inline">\(\rightarrow\)</span></th>
<th style="text-align: center;"><span class="math inline">\(x^2\)</span></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">10</td>
<td style="text-align: center;"><span class="math inline">\(\rightarrow\)</span></td>
<td style="text-align: center;">100</td>
</tr>
<tr class="even">
<td style="text-align: center;">2</td>
<td style="text-align: center;"><span class="math inline">\(\rightarrow\)</span></td>
<td style="text-align: center;">4</td>
</tr>
<tr class="odd">
<td style="text-align: center;">3</td>
<td style="text-align: center;"><span class="math inline">\(\rightarrow\)</span></td>
<td style="text-align: center;">9</td>
</tr>
<tr class="even">
<td style="text-align: center;">-3</td>
<td style="text-align: center;"><span class="math inline">\(\rightarrow\)</span></td>
<td style="text-align: center;">9</td>
</tr>
</tbody>
</table>
<p>From what we know about quadratics, square rooting would be the answer in this case. But in general, are there functions that can map the numbers on the right-hand side of the table back to the left-hand side?</p>
<p>Most mathematical operations have an <strong>inverse operation</strong>; addition can be undone by subtraction, and multiplication by division. The same is true of a function, it’s just a case of finding its <strong>inverse</strong>.</p>
<p>The general method<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a> is to:</p>
<ol type="1">
<li>write <span class="math inline">\(f(x)\)</span> as <span class="math inline">\(y\)</span>,</li>
<li>swap all appearances of <span class="math inline">\(x\)</span> and <span class="math inline">\(y\)</span>,</li>
<li>rearrange the subject of the formula to <span class="math inline">\(y\)</span> again,</li>
<li>replace the <span class="math inline">\(y\)</span> with <span class="math inline">\(f^{-1}(x)\)</span>.</li>
</ol>
<div class="callout callout-style-default callout-tip callout-titled" title="Example A">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Example A
</div>
</div>
<div class="callout-body-container callout-body">
<blockquote class="blockquote">
<p>Find the inverse operation of the function <span class="math inline">\(f(x) = 5x - 7\)</span>.”</p>
</blockquote>
<p>First we write this as <span class="math inline">\(y = 5x - 7\)</span>. Then we swap all appearances of <span class="math inline">\(x\)</span> and <span class="math inline">\(y\)</span> to get <span class="math inline">\(x = 5y - 7\)</span>. We must now rearrange it to make <span class="math inline">\(y\)</span> the subject, <em>i.e.</em> to put it in the form $y = $ some function of <span class="math inline">\(x\)</span>.</p>
<p><span class="math display">\[\begin{align*}
                            x &amp;= 5y-7 \\
                          x+7 &amp;= 5y \\
                \frac{x+7}{5} &amp;= y \\
   \frac{1}{5}x + \frac{7}{5} &amp;= y
\end{align*}\]</span></p>
<p>Finally, replacing <span class="math inline">\(y\)</span> with <span class="math inline">\(f^{-1}(x)\)</span> gives that the inverse function of <span class="math inline">\(f(x) = 5x-7\)</span> is <span class="math inline">\(f^{-1}(x) = \frac{1}{5}x+ \frac{7}{5}\)</span>. This means that if you send a number into <span class="math inline">\(f(x)\)</span>, say <span class="math inline">\(10\)</span></p>
<p><span class="math display">\[
  f(10) = 5 \times 10 -7 = 43
\]</span></p>
<p>and then apply <span class="math inline">\(f^{-1}(x)\)</span> to the result it will return to <span class="math inline">\(10\)</span>,</p>
<p><span class="math display">\[
  f^{-1}(43) = \frac{43+7}{5} = \frac{50}{5} = 10.
\]</span></p>
<p>Voila! You can also use Wolfram Alpha to find an inverse by typing in <code class="sourceCode mathematica"><span class="fu">inverse</span> of <span class="fu">y</span><span class="ex">=</span><span class="dv">5</span>x<span class="dv">-7</span></code>.</p>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled" title="Example B">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Example B
</div>
</div>
<div class="callout-body-container callout-body">
<blockquote class="blockquote">
<p>Find the inverse of <span class="math inline">\(f(x) = \frac{3x^2 + 7}{5}\)</span>.</p>
</blockquote>
<p>We work through this using “two column working” in the table below.</p>
<table class="caption-top table">
<thead>
<tr class="header">
<th style="text-align: center;">Equation</th>
<th style="text-align: left;">Explanation</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;"><span class="math inline">\(\frac{3y^2 + 7}{5} = x\)</span></td>
<td style="text-align: left;">After the initial swap.</td>
</tr>
<tr class="even">
<td style="text-align: center;"><span class="math inline">\(3y^2 + 7 = 5x\)</span></td>
<td style="text-align: left;">Multiply both sides by <span class="math inline">\(5\)</span>.</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><span class="math inline">\(3y^2 = 5x - 7\)</span></td>
<td style="text-align: left;">Subtract <span class="math inline">\(7\)</span> from both sides.</td>
</tr>
<tr class="even">
<td style="text-align: center;">$y^2 = $</td>
<td style="text-align: left;">Divide both sides by <span class="math inline">\(3\)</span></td>
</tr>
<tr class="odd">
<td style="text-align: center;"><span class="math inline">\(y = \sqrt{\frac{5x - 7}{3}}\)</span></td>
<td style="text-align: left;">Take the square root on both sides.</td>
</tr>
</tbody>
</table>
<p>Therefore <span class="math inline">\(f^{-1}(x) = \sqrt{\frac{5x-7}{3}}\)</span>.</p>
</div>
</div>
</section>
<section id="composite-functions" class="level2" data-number="1.3">
<h2 data-number="1.3" class="anchored" data-anchor-id="composite-functions"><span class="header-section-number">1.3</span> Composite functions</h2>
<p>If we have two functions <span class="math inline">\(f\)</span> and <span class="math inline">\(g\)</span> we can form the <strong>composition</strong> <span class="math inline">\(f(g(x))\)</span>, sometimes denoted <span class="math inline">\((f \circ g)(x)\)</span>). This is read aloud as “<span class="math inline">\(f\)</span> of <span class="math inline">\(g\)</span> of <span class="math inline">\(x\)</span>”.</p>
<p>When evaluating these we work outwards from the innermost brackets. Here, given a number <span class="math inline">\(x\)</span>, we first apply <span class="math inline">\(g\)</span> to <span class="math inline">\(x\)</span> to get the value <span class="math inline">\(g(x)\)</span>, and then we apply <span class="math inline">\(f\)</span> to the number <span class="math inline">\(g(x)\)</span> to get the number <span class="math inline">\(f(g(x))\)</span>.</p>
<div class="callout callout-style-default callout-tip callout-titled" title="Example A">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Example A
</div>
</div>
<div class="callout-body-container callout-body">
<blockquote class="blockquote">
<p>If <span class="math inline">\(f(x) = x^2 +1\)</span> and <span class="math inline">\(g(x) = 2x + 3\)</span>, express the composites <span class="math inline">\(f(g(x))\)</span> and <span class="math inline">\(g(f(x))\)</span> explicitly as functions of <span class="math inline">\(x\)</span>.</p>
</blockquote>
<p>By definition we have that</p>
<p><span class="math display">\[\begin{align*}
   f(g(x)) &amp;= f (2x + 3) \\
           &amp;= (2x + 3)^2 + 1 \\
           &amp;= 4x^2 + 12x + 9 + 1 \\
           &amp;= 4x^2 + 12x + 10.
\end{align*}\]</span></p>
<p>Similarly, we have that <span class="math display">\[\begin{align*}
   g(f(x)) &amp; = g( x^2 + 1) \\
           &amp;= 2 (x^2 + 1) + 3 \\
           &amp; = 2x^2 + 2 + 3 \\
           &amp;= 2x^2 + 5.
\end{align*}\]</span></p>
</div>
</div>
<div class="callout callout-style-default callout-warning callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Warning
</div>
</div>
<div class="callout-body-container callout-body">
<p>Notice these two functions are different functions, e.g.&nbsp;<span class="math inline">\(f(g(0)) = 10\)</span> but <span class="math inline">\(g(f(0)) = 5\)</span>. The order is crucial!</p>
</div>
</div>
<p>At time of writing, Wolfram Alpha does not have function composition capabilities, though the software it is based on does.</p>
<section id="decomposing-functions" class="level3" data-number="1.3.1">
<h3 data-number="1.3.1" class="anchored" data-anchor-id="decomposing-functions"><span class="header-section-number">1.3.1</span> Decomposing Functions</h3>
<p>Other than the idea of a function feeding into another function being a useful one to understand (for instance when you consider machine learning and biological processes), it will also be a useful skill when we come to differentiation.</p>
<p>For example, consider <span class="math inline">\((\color{red}{5x+8})^2\)</span>. Here the expression <span class="math inline">\(5x+8\)</span> is nested within another function. We can think of it as the “inside” function. The outside function is <span class="math inline">\(x^2\)</span>.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/06/decompose.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:50.0%" alt="Visual explanation of function composition and decomposition."></p>
</figure>
</div>
<p>So if, for example, we were asked to decompose <span class="math inline">\(g(f(x)) = (5x+8)^2\)</span> then a possible answer might be <span class="math inline">\(f(x)=5x+8\)</span> and <span class="math inline">\(g(x)=x^2\)</span>.</p>


</section>
</section>
</section>


<div id="quarto-appendix" class="default"><section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes"><h2 class="anchored quarto-appendix-heading">Footnotes</h2>

<ol>
<li id="fn1"><p>This method comes from the graph of a function and its inverse being mirrored in the line <span class="math inline">\(y = x\)</span>.<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section></div></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    // Ensure there is a toggle, if there isn't float one in the top right
    if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
      const a = window.document.createElement('a');
      a.classList.add('top-right');
      a.classList.add('quarto-color-scheme-toggle');
      a.href = "";
      a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
      const i = window.document.createElement("i");
      i.classList.add('bi');
      a.appendChild(i);
      window.document.body.appendChild(a);
    }
    setColorSchemeToggle(hasAlternateSentinel())
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->




</body></html>